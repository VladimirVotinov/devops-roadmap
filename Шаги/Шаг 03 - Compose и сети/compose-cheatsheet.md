üß© –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω `docker-compose.yml`

```yaml
version: "3.8"  # ‚úÖ –ú–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Docker Compose

services:
  <–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞>:
    image: <–∏–º—è_–æ–±—Ä–∞–∑–∞>  # –ù–∞–ø—Ä–∏–º–µ—Ä: nginx, postgres:15, your/image:tag
    container_name: <–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä_–∏–º—è>  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –£–∫–∞–∂–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
    ports:
      - "80:80"  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–π –ø–æ—Ä—Ç—ã, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏
    volumes:
      - ./data:/data  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ú–æ–Ω—Ç–∏—Ä—É–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    environment:
      - ENV_VAR=value  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    depends_on:
      - <–¥—Ä—É–≥–æ–π_—Å–µ—Ä–≤–∏—Å>  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π, –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    restart: unless-stopped  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
    networks:
      - default  # ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞—ë—à—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–µ—Ç–∏

# ‚ùóÔ∏è–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Ç–∏
networks:
  default:
    driver: bridge

```

## üîπ –ß—Ç–æ –º–µ–Ω—è—Ç—å –ø–æ–¥ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç


| –ß—Ç–æ                    | –ß—Ç–æ –≤–ø–∏—Å–∞—Ç—å                                                         |
| ------------------------- | ----------------------------------------------------------------------------- |
| `<–∏–º—è_—Å–µ—Ä–≤–∏—Å–∞>` | –ù–∞–ø—Ä–∏–º–µ—Ä:`nginx`,`db`,`app`                                           |
| `<–∏–º—è_–æ–±—Ä–∞–∑–∞>`   | Docker Hub-–æ–±—Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä,`nginx:alpine`,`mysql:8`)             |
| `container_name`          | –£–¥–æ–±–Ω–æ–µ –∏–º—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (`nginx`,`postgres`)              |
| `ports`                   | `—Ö–æ—Å—Ç:–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä`, –Ω–∞–ø—Ä–∏–º–µ—Ä`8080:80`, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ |
| `volumes`                 | –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤              |
| `environment`             | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:`POSTGRES_USER=admin`,`TZ=UTC`                           |
| `depends_on`              | –ï—Å–ª–∏`app`–∑–∞–≤–∏—Å–∏—Ç –æ—Ç`db`‚Äî –¥–æ–±–∞–≤—å —ç—Ç–æ                    |
| `restart`                 | –ù–∞–ø—Ä–∏–º–µ—Ä:`always`,`on-failure`,`unless-stopped`                       |

üí° –ü—Ä–∏–º–µ—Ä —Å –¥–≤—É–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏: `nginx + whoami`

```yaml
version: "3.8"

services:
  nginx:
    image: nginx:alpine
    container_name: nginx
    ports:
      - "8080:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - whoami
    restart: unless-stopped

  whoami:
    image: traefik/whoami
    container_name: whoami
    restart: unless-stopped
```

## üõ† **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker Compose**


| –ö–æ–º–∞–Ω–¥–∞                    | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                                 |
| --------------------------------- | -------------------------------------------------------------------- |
| `docker compose up`               | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã                             |
| `docker compose up -d`            | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ (detached mode)                       |
| `docker compose down`             | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å—ë, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–æ |
| `docker compose build`            | –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏–∑ Dockerfile                          |
| `docker compose restart`          | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã                            |
| `docker compose ps`               | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  |
| `docker compose logs`             | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏                                            |
| `docker compose logs -f`          | –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏                          |
| `docker compose exec –∏–º—è bash` | –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞        |
| `docker compose config`           | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å docker-compose.yml           |

‚ö†Ô∏è –ù–∞—á–∏–Ω–∞—è —Å Docker v20.10+ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `docker compose` (—Å –ø—Ä–æ–±–µ–ª–æ–º), **–∞ –Ω–µ**`docker-compose` (—á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å).

## üßπ **–ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—ë–º—ã**

```bash
# –£–±–∏—Ç—å –≤—Å—ë –∏ –æ—á–∏—Å—Ç–∏—Ç—å
docker compose down --volumes

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ –æ—à–∏–±–∫–∏
docker compose config

```



## üì¶ **–§–∞–π–ª—ã .env (–¥–ª—è env\_file)**

–ü—Ä–∏–º–µ—Ä .env:

```ini
MYSQL_ROOT_PASSWORD=root
MYSQL_DATABASE=appdb
TZ=Europe/Moscow
```
